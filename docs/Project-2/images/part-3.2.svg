<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="927px" preserveAspectRatio="none" style="width:1229px;height:927px;background:#FFFFFF;" version="1.1" viewBox="0 0 1229 927" width="1229px" zoomAndPan="magnify"><defs/><g><!--MD5=[c887fed489b428c5382c9d2552f7bcb3]
class OnlineSearchContext--><g id="elem_OnlineSearchContext"><rect codeLine="1" fill="#F1F1F1" height="96.8906" id="OnlineSearchContext" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="462" x="201.5" y="202"/><ellipse cx="355.25" cy="218" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M358.2188,223.6406 Q357.6406,223.9375 357,224.0781 Q356.3594,224.2344 355.6563,224.2344 Q353.1563,224.2344 351.8281,222.5938 Q350.5156,220.9375 350.5156,217.8125 Q350.5156,214.6875 351.8281,213.0313 Q353.1563,211.375 355.6563,211.375 Q356.3594,211.375 357,211.5313 Q357.6563,211.6875 358.2188,211.9844 L358.2188,214.7031 Q357.5938,214.125 357,213.8594 Q356.4063,213.5781 355.7813,213.5781 Q354.4375,213.5781 353.75,214.6563 Q353.0625,215.7188 353.0625,217.8125 Q353.0625,219.9063 353.75,220.9844 Q354.4375,222.0469 355.7813,222.0469 Q356.4063,222.0469 357,221.7813 Q357.5938,221.5 358.2188,220.9219 L358.2188,223.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="375.75" y="222.8467">OnlineSearchContext</text><line style="stroke:#181818;stroke-width:0.5;" x1="202.5" x2="662.5" y1="234" y2="234"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="209.5" y="244.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="221.5" y="250.9951">searchStrategy: OnlineSearchStrategy</text><line style="stroke:#181818;stroke-width:0.5;" x1="202.5" x2="662.5" y1="258.2969" y2="258.2969"/><ellipse cx="212.5" cy="271.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="436" x="221.5" y="275.292">setSearchStrategy(searchStrategy: OnlineSearchStrategy): void</text><ellipse cx="212.5" cy="288.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="355" x="221.5" y="291.5889">fetchResults(criteria: OnlineSearchCriteria): List&lt;?&gt;</text></g><!--MD5=[927f9f861fde66b6d100731ffcaabd56]
class OnlineResourceFactory--><g id="elem_OnlineResourceFactory"><rect codeLine="44" fill="#F1F1F1" height="80.5938" id="OnlineResourceFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="409" x="228" y="572"/><ellipse cx="347.75" cy="588" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M343.6719,583.7656 L343.6719,581.6094 L351.0625,581.6094 L351.0625,583.7656 L348.5938,583.7656 L348.5938,591.8438 L351.0625,591.8438 L351.0625,594 L343.6719,594 L343.6719,591.8438 L346.1406,591.8438 L346.1406,583.7656 L343.6719,583.7656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="161" x="368.25" y="592.8467">OnlineResourceFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="229" x2="636" y1="604" y2="604"/><line style="stroke:#181818;stroke-width:0.5;" x1="229" x2="636" y1="612" y2="612"/><ellipse cx="239" cy="625.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="383" x="248" y="628.9951">createAudioBooks(itemObject: JSONObject): AudioBook</text><ellipse cx="239" cy="641.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="345" x="248" y="645.292">createPodcasts(itemObject: JSONObject): Podcast</text></g><path d="M699,6 L699,241.5586 L576.5,286.7422 L699,249.5586 L699,485.1172 A0,0 0 0 0 699,485.1172 L1222,485.1172 A0,0 0 0 0 1222,485.1172 L1222,16 L1212,6 L699,6 A0,0 0 0 0 699,6 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1212,6 L1212,16 L1222,16 L1212,6 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="705" y="23.0669">OnlineResourceFactory factory = null;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="437" x="705" y="38.1997">if (criteria.getProvider() == OnlineSearchContentProvider.SPOTIFY) {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256" x="721" y="53.3325">factory = new SpotifyResourceFactory();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="482" x="705" y="68.4653">} else if (criteria.getProvider() == OnlineSearchContentProvider.I_TUNES) {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="253" x="721" y="83.5981">factory = new iTunesResourceFactory();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="705" y="98.731">} else {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="442" x="721" y="113.8638">throw new IllegalArgumentException("Unsupported onlince provider");</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="705" y="128.9966">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="705" y="144.1294"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="480" x="705" y="159.2622">if(criteria.getContentType() == OnlineSearchContentType.AUDIO_BOOKS){</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="721" y="174.395">List&lt;AudioBook&gt; results = new ArrayList&lt;&gt;();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="721" y="189.5278">for (int i = 0; i &lt; resultItems.length(); i++) {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="353" x="737" y="204.6606">JSONObject itemObject = resultItems.getJSONObject(i);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="705" y="219.7935">        </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="368" x="737" y="234.9263">AudioBook item = factory.createAudioBooks(itemObject);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="737" y="250.0591">results.add(item);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="721" y="265.1919">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="721" y="280.3247">return results;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="502" x="705" y="295.4575">} else if (criteria.getContentType() == OnlineSearchContentType.PODCASTS){</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="721" y="310.5903">List&lt;Podcast&gt; results = new ArrayList&lt;&gt;();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="721" y="325.7231">for (int i = 0; i &lt; resultItems.length(); i++) {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="353" x="737" y="340.856">JSONObject itemObject = resultItems.getJSONObject(i);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="705" y="355.9888">        </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="334" x="737" y="371.1216">Podcast item = factory.createPodcasts(itemObject);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="737" y="386.2544">results.add(item);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="721" y="401.3872">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="721" y="416.52">return results;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="705" y="431.6528">} else {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="356" x="721" y="446.7856">// Handle the case where content type is not recognized</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="422" x="721" y="461.9185">throw new IllegalArgumentException("Unsupported content type");</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="705" y="477.0513">}</text><!--MD5=[5cf305aef0bb73a447c704e60fcb645b]
class SpotifyResourceFactory--><g id="elem_SpotifyResourceFactory"><rect codeLine="49" fill="#F1F1F1" height="80.5938" id="SpotifyResourceFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="409" x="7" y="714"/><ellipse cx="125.75" cy="730" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M128.7188,735.6406 Q128.1406,735.9375 127.5,736.0781 Q126.8594,736.2344 126.1563,736.2344 Q123.6563,736.2344 122.3281,734.5938 Q121.0156,732.9375 121.0156,729.8125 Q121.0156,726.6875 122.3281,725.0313 Q123.6563,723.375 126.1563,723.375 Q126.8594,723.375 127.5,723.5313 Q128.1563,723.6875 128.7188,723.9844 L128.7188,726.7031 Q128.0938,726.125 127.5,725.8594 Q126.9063,725.5781 126.2813,725.5781 Q124.9375,725.5781 124.25,726.6563 Q123.5625,727.7188 123.5625,729.8125 Q123.5625,731.9063 124.25,732.9844 Q124.9375,734.0469 126.2813,734.0469 Q126.9063,734.0469 127.5,733.7813 Q128.0938,733.5 128.7188,732.9219 L128.7188,735.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="146.25" y="734.8467">SpotifyResourceFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="415" y1="746" y2="746"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="415" y1="754" y2="754"/><ellipse cx="18" cy="767.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="383" x="27" y="770.9951">createAudioBooks(itemObject: JSONObject): AudioBook</text><ellipse cx="18" cy="783.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="345" x="27" y="787.292">createPodcasts(itemObject: JSONObject): Podcast</text></g><!--MD5=[a039bf5c8bbb0026beb9828cb0f74e4c]
class AudioBook--><g id="elem_AudioBook"><rect fill="#F1F1F1" height="48" id="AudioBook" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="313" y="872"/><ellipse cx="328" cy="888" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M330.9688,893.6406 Q330.3906,893.9375 329.75,894.0781 Q329.1094,894.2344 328.4063,894.2344 Q325.9063,894.2344 324.5781,892.5938 Q323.2656,890.9375 323.2656,887.8125 Q323.2656,884.6875 324.5781,883.0313 Q325.9063,881.375 328.4063,881.375 Q329.1094,881.375 329.75,881.5313 Q330.4063,881.6875 330.9688,881.9844 L330.9688,884.7031 Q330.3438,884.125 329.75,883.8594 Q329.1563,883.5781 328.5313,883.5781 Q327.1875,883.5781 326.5,884.6563 Q325.8125,885.7188 325.8125,887.8125 Q325.8125,889.9063 326.5,890.9844 Q327.1875,892.0469 328.5313,892.0469 Q329.1563,892.0469 329.75,891.7813 Q330.3438,891.5 330.9688,890.9219 L330.9688,893.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="342" y="892.8467">AudioBook</text><line style="stroke:#181818;stroke-width:0.5;" x1="314" x2="419" y1="904" y2="904"/><line style="stroke:#181818;stroke-width:0.5;" x1="314" x2="419" y1="912" y2="912"/></g><!--MD5=[148499297b6f36812855c8d7dd33a717]
class Podcast--><g id="elem_Podcast"><rect fill="#F1F1F1" height="48" id="Podcast" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="525.5" y="872"/><ellipse cx="540.5" cy="888" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M543.4688,893.6406 Q542.8906,893.9375 542.25,894.0781 Q541.6094,894.2344 540.9063,894.2344 Q538.4063,894.2344 537.0781,892.5938 Q535.7656,890.9375 535.7656,887.8125 Q535.7656,884.6875 537.0781,883.0313 Q538.4063,881.375 540.9063,881.375 Q541.6094,881.375 542.25,881.5313 Q542.9063,881.6875 543.4688,881.9844 L543.4688,884.7031 Q542.8438,884.125 542.25,883.8594 Q541.6563,883.5781 541.0313,883.5781 Q539.6875,883.5781 539,884.6563 Q538.3125,885.7188 538.3125,887.8125 Q538.3125,889.9063 539,890.9844 Q539.6875,892.0469 541.0313,892.0469 Q541.6563,892.0469 542.25,891.7813 Q542.8438,891.5 543.4688,890.9219 L543.4688,893.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="554.5" y="892.8467">Podcast</text><line style="stroke:#181818;stroke-width:0.5;" x1="526.5" x2="612.5" y1="904" y2="904"/><line style="stroke:#181818;stroke-width:0.5;" x1="526.5" x2="612.5" y1="912" y2="912"/></g><!--MD5=[6e1a6f5548a3e6653ac2d2f8f2429928]
class iTunesResourceFactory--><g id="elem_iTunesResourceFactory"><rect codeLine="56" fill="#F1F1F1" height="80.5938" id="iTunesResourceFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="409" x="451" y="714"/><ellipse cx="569.25" cy="730" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M572.2188,735.6406 Q571.6406,735.9375 571,736.0781 Q570.3594,736.2344 569.6563,736.2344 Q567.1563,736.2344 565.8281,734.5938 Q564.5156,732.9375 564.5156,729.8125 Q564.5156,726.6875 565.8281,725.0313 Q567.1563,723.375 569.6563,723.375 Q570.3594,723.375 571,723.5313 Q571.6563,723.6875 572.2188,723.9844 L572.2188,726.7031 Q571.5938,726.125 571,725.8594 Q570.4063,725.5781 569.7813,725.5781 Q568.4375,725.5781 567.75,726.6563 Q567.0625,727.7188 567.0625,729.8125 Q567.0625,731.9063 567.75,732.9844 Q568.4375,734.0469 569.7813,734.0469 Q570.4063,734.0469 571,733.7813 Q571.5938,733.5 572.2188,732.9219 L572.2188,735.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="589.75" y="734.8467">iTunesResourceFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="452" x2="859" y1="746" y2="746"/><line style="stroke:#181818;stroke-width:0.5;" x1="452" x2="859" y1="754" y2="754"/><ellipse cx="462" cy="767.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="383" x="471" y="770.9951">createAudioBooks(itemObject: JSONObject): AudioBook</text><ellipse cx="462" cy="783.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="345" x="471" y="787.292">createPodcasts(itemObject: JSONObject): Podcast</text></g><!--MD5=[ba18ecd0bcd1766818fa21b6ae8f6954]
link OnlineSearchContext to OnlineResourceFactory--><g id="link_OnlineSearchContext_OnlineResourceFactory"><path codeLine="7" d="M432.5,299.31 C432.5,369.21 432.5,498.39 432.5,566.61 " fill="none" id="OnlineSearchContext-to-OnlineResourceFactory" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="432.5,571.81,436.5,562.81,432.5,566.81,428.5,562.81,432.5,571.81" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="433.5" y="538.0669">uses</text></g><!--MD5=[b6e43061f757c810e73d5ba5a8ee5300]
reverse link OnlineResourceFactory to SpotifyResourceFactory--><g id="link_OnlineResourceFactory_SpotifyResourceFactory"><path d="M353.01,663.85 C327.09,680.28 298.69,698.27 274.17,713.8 " fill="none" id="OnlineResourceFactory-backto-SpotifyResourceFactory" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="349.42,657.85,370.06,653.06,356.91,669.67,349.42,657.85" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a190ef11d7b7dfdf8a81ca151087ebde]
link SpotifyResourceFactory to AudioBook--><g id="link_SpotifyResourceFactory_AudioBook"><path codeLine="53" d="M255.5,795.1 C281.56,818.55 313.88,847.64 336.91,868.37 " fill="none" id="SpotifyResourceFactory-to-AudioBook" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="340.81,871.88,336.7962,862.8861,337.0935,868.5352,331.4445,868.8325,340.81,871.88" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="308.5" y="838.0669">uses</text></g><!--MD5=[52a1c8d6fad572325f708e9d3478600b]
link SpotifyResourceFactory to Podcast--><g id="link_SpotifyResourceFactory_Podcast"><path codeLine="54" d="M313.13,795.1 C381.16,821.61 467.64,855.31 520.76,876.01 " fill="none" id="SpotifyResourceFactory-to-Podcast" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="525.47,877.84,518.5359,870.8459,520.8111,876.025,515.6319,878.3002,525.47,877.84" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="434.5" y="838.0669">uses</text></g><!--MD5=[a995c036cbcb7982e128939a30ff3a1e]
reverse link OnlineResourceFactory to iTunesResourceFactory--><g id="link_OnlineResourceFactory_iTunesResourceFactory"><path d="M512.7,663.85 C538.86,680.28 567.53,698.27 592.26,713.8 " fill="none" id="OnlineResourceFactory-backto-iTunesResourceFactory" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="508.73,669.62,495.51,653.06,516.17,657.76,508.73,669.62" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[dc98f37b350d9067e75766de1c466d9e]
link iTunesResourceFactory to AudioBook--><g id="link_iTunesResourceFactory_AudioBook"><path codeLine="60" d="M581.64,795.13 C552.8,810.24 519.31,827.35 488.5,842 C467.94,851.78 445.12,861.89 424.83,870.62 " fill="none" id="iTunesResourceFactory-to-AudioBook" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="420,872.69,429.8483,872.7955,424.5905,870.7084,426.6777,865.4506,420,872.69" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="522.5" y="838.0669">uses</text></g><!--MD5=[01fee75328ab8d6eba2a9c470f7dab53]
link iTunesResourceFactory to Podcast--><g id="link_iTunesResourceFactory_Podcast"><path codeLine="61" d="M631.09,795.1 C616.81,818.26 599.14,846.92 586.4,867.59 " fill="none" id="iTunesResourceFactory-to-Podcast" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="583.76,871.88,591.8918,866.3236,586.3869,867.6256,585.0848,862.1207,583.76,871.88" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="613.5" y="838.0669">uses</text></g><!--MD5=[73b566f7c607579d1d51cfc1c69bdda6]
@startuml
class OnlineSearchContext {
    - searchStrategy: OnlineSearchStrategy

    + setSearchStrategy(searchStrategy: OnlineSearchStrategy): void
    + fetchResults(criteria: OnlineSearchCriteria): List<?>
}
OnlineSearchContext ..> OnlineResourceFactory :uses

note right of OnlineSearchContext::fetchResults
    OnlineResourceFactory factory = null;
    if (criteria.getProvider() == OnlineSearchContentProvider.SPOTIFY) {
        factory = new SpotifyResourceFactory();
    } else if (criteria.getProvider() == OnlineSearchContentProvider.I_TUNES) {
        factory = new iTunesResourceFactory();
    } else {
        throw new IllegalArgumentException("Unsupported onlince provider");
    }

    if(criteria.getContentType() == OnlineSearchContentType.AUDIO_BOOKS){
        List<AudioBook> results = new ArrayList<>();
        for (int i = 0; i < resultItems.length(); i++) {
            JSONObject itemObject = resultItems.getJSONObject(i);
            
            AudioBook item = factory.createAudioBooks(itemObject);
            results.add(item);
        }
        return results;
    } else if (criteria.getContentType() == OnlineSearchContentType.PODCASTS){
        List<Podcast> results = new ArrayList<>();
        for (int i = 0; i < resultItems.length(); i++) {
            JSONObject itemObject = resultItems.getJSONObject(i);
            
            Podcast item = factory.createPodcasts(itemObject);
            results.add(item);
        }
        return results;
    } else {
        // Handle the case where content type is not recognized
        throw new IllegalArgumentException("Unsupported content type");
    }    
end note


interface OnlineResourceFactory {
    + createAudioBooks(itemObject: JSONObject): AudioBook
    + createPodcasts(itemObject: JSONObject): Podcast
}

class SpotifyResourceFactory implements OnlineResourceFactory {
  + createAudioBooks(itemObject: JSONObject): AudioBook
  + createPodcasts(itemObject: JSONObject): Podcast
}
SpotifyResourceFactory ..> AudioBook :uses
SpotifyResourceFactory ..> Podcast :uses

class iTunesResourceFactory implements OnlineResourceFactory {
  + createAudioBooks(itemObject: JSONObject): AudioBook
  + createPodcasts(itemObject: JSONObject): Podcast
}
iTunesResourceFactory ..> AudioBook :uses
iTunesResourceFactory ..> Podcast :uses
@enduml

PlantUML version 1.2022.7(Mon Aug 22 22:31:30 IST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: IN
--></g></svg>